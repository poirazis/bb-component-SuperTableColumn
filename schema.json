{
  "type": "component",
  "metadata": {},
  "schema": {
    "name": "bb-component-SuperTableColumn",
    "friendlyName": "Super Table Column",
    "description": "Customizable columns for the Super Table Component",
    "info": "You can add components to customize how cell values are displayed.",
    "icon": "TableColumnAddRight",
    "hasChildren": true,
    "illegalChildren": ["plugin/bb-component-SuperTableColumn"],
    "showSettingsBar": true,
    "showEmptyState": false, 
    "settings": [
      {
        "type" : "text",
        "key" : "field",
        "label" : "Field",
        "hidden" : true
      },
      {
        "type": "select",
        "key": "columnType",
        "label" : "Column Type",
        "options" : [
          {"label" : "Schema", "value": "auto" },
          {"label" : "Option", "value": "options" },
          {"label" : "Options", "value": "array" },
          {"label" : "SQL Relationship", "value": "linkSQL" },
          {"label" : "SurrealDB Link", "value": "linkSurrealRecordLink" },
          {"label" : "SurrealDB Relationship", "value": "linkSurrealGraphEdge" }

        ],
        "defaultValue" : "auto"
      },
      {
        "type": "text",
        "key": "header",
        "label": "Header"
      },
      {
        "type": "text",
        "key": "valueTemplate",
        "label": "Value",
        "placeholder" : "{{ Value }}",
        "nested" : "true"
      },
      {
        "type": "text",
        "key": "footer",
        "label": "Footer"
      },
      {
        "section" : true,
        "name": "Options Settings",
        "dependsOn": { "setting": "columnType", "value" : "options" },
        "settings": [
          {
            "type": "select",
            "label": "Options source",
            "key": "optionsSource",
            "defaultValue": "data",
            "placeholder": "Pick an options source",
            "options": [
              {
                "label": "Data",
                "value": "data"
              },
              {
                "label": "Custom",
                "value": "custom"
              }
            ]
          },
          {
            "type": "options",
            "key": "customOptions",
            "label": "Custom Options",
            "dependsOn": {
              "setting": "optionsSource",
              "value": "custom"
            }
          },
          { 
            "type" : "dataSource",
            "key": "datasource",
            "label" : "Data Source",
            "dependsOn": {
              "setting": "optionsSource",
              "value": "data"
            },
            "resetsOn" : "columnType"
          },
          { 
            "type" : "field",
            "key": "valueColumn",
            "label" : "Value Column",
            "dependsOn": {
              "setting": "optionsSource",
              "value": "data"
            },
            "resetsOn" : "datasource"
          },
          { 
            "type" : "field",
            "key": "labelColumn",
            "label" : "Label Column",
            "dependsOn": {
              "setting": "optionsSource",
              "value": "data"
            },
            "resetsOn" : "datasource"
          },
          { 
            "type" : "field",
            "key": "colorColumn",
            "label" : "Color Column",
            "dependsOn": {
              "setting": "optionsSource",
              "value": "data"
            },
            "resetsOn" : "datasource"
          },
          { 
            "type" : "field",
            "key": "iconColumn",
            "label" : "Icon Column",
            "info" : "Must contain a remix icon class name",
            "dependsOn": {
              "setting": "optionsSource",
              "value": "data"
            },
            "resetsOn" : "datasource"
          }
        ]
      },
      {
        "section" : true,
        "name": "Relationship Settings",
        "dependsOn": { "setting": "columnType", "value" : "linkSQL" },
        "settings": [
          {
            "type": "select",
            "label": "Type",
            "key": "linkSQLType",
            "defaultValue": "data",
            "placeholder": "Pick an options source",
            "options": [
              {
                "label": "One-to-One",
                "value": "one-to-one"
              },
              {
                "label": "One-to-Many",
                "value": "one-to-many"
              },
              {
                "label": "Nany-to-One",
                "value": "one-to-many"
              },
              {
                "label": "Many-to-Many",
                "value": "many-to-many"
              }
            ]
          },
          { 
            "type" : "table",
            "key": "datasource",
            "label" : "Table",
            "dependsOn": {
              "setting": "optionsSource",
              "value": "data"
            },
            "resetsOn" : "columnType"
          },
          { 
            "type" : "field",
            "key": "valueColumn",
            "label" : "Value Column",
            "dependsOn": {
              "setting": "optionsSource",
              "value": "data"
            },
            "resetsOn" : "datasource"
          },
          { 
            "type" : "field",
            "key": "labelColumn",
            "label" : "Label Column",
            "dependsOn": {
              "setting": "optionsSource",
              "value": "data"
            },
            "resetsOn" : "datasource"
          },
          { 
            "type" : "field",
            "key": "colorColumn",
            "label" : "Color Column",
            "dependsOn": {
              "setting": "optionsSource",
              "value": "data"
            },
            "resetsOn" : "datasource"
          },
          { 
            "type" : "field",
            "key": "iconColumn",
            "label" : "Icon Column",
            "info" : "Must contain a remix icon class name",
            "dependsOn": {
              "setting": "optionsSource",
              "value": "data"
            },
            "resetsOn" : "datasource"
          }
        ]
      },
      {
        "type": "select",
        "key": "sizing",
        "label": "Column Sizing",
        "options": [
          {"label": "Fixed", "value": "fixed"},
          {"label": "Flexible", "value": "flexible"}
        ],
        "defaultValue" : "flexible"
      },
      {
        "type" : "number",
        "key" : "flexFactor",
        "label" : "Flex Factor",
        "min" : 1,
        "defaultValue" : 1,
        "dependsOn" : { "setting" : "sizing", "value" : "flexible"}
      },
      {
        "type" : "text",
        "key" : "minWidth",
        "label" : "Min Width",
        "dependsOn" : { "setting" : "sizing", "value" : "flexible"}
      },
      {
        "type" : "text",
        "key" : "maxWidth",
        "label" : "Max Width",
        "dependsOn" : { "setting" : "sizing", "value" : "flexible"}
      },
      {
        "type" : "text",
        "key" : "fixedWidth",
        "label" : "Width",
        "dependsOn" : { "setting" : "sizing", "value" : "fixed"}
      },
      {
        "type": "icon",
        "key": "icon",
        "label": "Icon"
      },
      {
        "type": "select",
        "key": "canEdit",
        "label": "Edit",
        "showInBar": true,
        "barStyle": "buttons",
        "options": [
          { "label" : "Inherit", "value": "inherit", "barIcon" : "Table" },
          { "label" : "On", "value": true, "barIcon" : "Checkmark"  },
          { "label" : "Off", "value": false, "barIcon" : "Cancel" }
        ],
        "defaultValue": "inherit"
      },
      {
        "type": "boolean",
        "key": "canFilter",
        "label": "Filter",
        "defaultValue": true
      },
      {
        "type": "boolean",
        "key": "canSort",
        "label": "Sort",
        "defaultValue": true
      },
      {
        "type": "boolean",
        "key": "canResize",
        "label": "Resize",
        "defaultValue": true
      },
      {
        "type": "select",
        "label": "Search Mode",
        "key": "searchMode",
        "dependsOn": "searchable",
        "options" : [
          { "label": "Live Debounced", "value": "live" },
          { "label": "On Enter / Tab", "value": "onEnter"}
        ],
        "defaultValue": "live"
      },
      {
        "tag" : "style",
        "section": true,
        "name": "Header Settings",
        "settings": [
          {
            "type": "select",
            "label": "Header Alignment",
            "key": "headerAlign",
            "showInBar": true,
            "barStyle": "buttons",
            "options": [
              {
                "label": "Left",
                "value": "flex-start",
                "barIcon": "TextAlignLeft",
                "barTitle": "Header Align Left"
              },
              {
                "label": "Center",
                "value": "center",
                "barIcon": "TextAlignCenter",
                "barTitle": "Header Align Center"
              },
              {
                "label": "Right",
                "value": "flex-end",
                "barIcon": "TextAlignRight",
                "barTitle": "Header Align Right"
              }
            ],
            "defaultValue": "flex-start"
          },
          {
            "type": "color",
            "key": "headerFontColor",
            "label": "Font Color"
          },
          {
            "type": "color",
            "key": "headerBackground",
            "label": "BG Color"
          }
        ]
      },
      {
        "tag": "style",
        "section": true,
        "name": "Row Settings",
        "settings": [
          {
            "type": "select",
            "label": "Hor. Align",
            "key": "rowHorizontalAlign",
            "showInBar": true,
            "barStyle": "buttons",
            "options": [
              {
                "label": "Left",
                "value": "flex-start",
                "barIcon": "AlignLeft",
                "barTitle": "Cell Align left"
              },
              {
                "label": "Center",
                "value": "center",
                "barIcon": "AlignCenter",
                "barTitle": "Cell Align center"
              },
              {
                "label": "Right",
                "value": "flex-end",
                "barIcon": "AlignRight",
                "barTitle": "Cell Align right"
              }
            ],
            "defaultValue": "flex-start"
          },
          {
            "type": "color",
            "key": "rowFontColor",
            "label": "Font Color"
          },
          {
            "type": "color",
            "key": "rowBackground",
            "label": "Bg Color"
          },
          {
            "type": "text",
            "key": "fontWeight",
            "label": "Font Weight"
          }
        ]
      },
      {
        "tag": "style",
        "section": true,
        "name": "Footer Settings",
        "settings": [
          {
            "type": "select",
            "label": "Footer Alignment",
            "key": "footerAlign",
            "showInBar": true,
            "barStyle": "buttons",
            "options": [
              {
                "label": "Left",
                "value": "flex-start",
                "barIcon": "TextAlignLeft",
                "barTitle": "Footer Align Left"
              },
              {
                "label": "Center",
                "value": "center",
                "barIcon": "TextAlignCenter",
                "barTitle": "Footer Align Center"
              },
              {
                "label": "Right",
                "value": "flex-end",
                "barIcon": "TextAlignRight",
                "barTitle": "Footer Align Right"
              }
            ],
            "defaultValue": "flex-start"
          },
          {
            "type": "color",
            "key": "footerFontColor",
            "label": "Font Color"
          },
          {
            "type": "color",
            "key": "footerBackground",
            "label": "Bg Color"
          }
        ]
      },
      {
        "tag" : "style",
        "type" : "boolean",
        "key" : "useOptionColors",
        "label" : "Option Colors",
        "defaultValue" : false
      },
      {
        "tag" : "style",
        "type" : "boolean",
        "key" : "useOptionIcons",
        "label" : "Option Icons",
        "defaultValue" : false
      },
      {
        "tag" : "style",
        "type": "select",
        "label": "Options Mode",
        "key": "optionsViewMode",
        "defaultValue": "text",
        "showInBar": true,
        "barStyle": "buttons",
        "options": [
          {
            "label": "Pills",
            "value": "pills",
            "barIcon": "Button"
          },
          {
            "label": "text",
            "value": "text",
            "barIcon": "Text"
          }
        ]
      }
    ],
    "context": [
      {
        "type": "static",
        "values": [
          {
            "label": "id",
            "key": "rowID",
            "type": "object"
          },
          {
            "label": "Value",
            "key": "value",
            "type": "object"
          }
        ]
      }
    ]
  }
}